library(tidyverse)

# 1. 排列组合 ----
df = tribble(
  ~Date,    ~ID,
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "A",
"2010-01-02", "W",
"2010-01-02", "W",
"2010-01-02", "W",
"2010-01-02", "W",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "A",
"2010-01-11", "G",
"2010-01-11", "G",
"2010-01-11", "G",
"2010-01-11", "K",
"2010-01-11", "K",
"2010-01-11", "K",
"2010-01-11", "W",
"2010-01-11", "W",
)
df

df %>%
  reframe(
    setNames(data.frame(t(combn(unique(ID), 2))), c("From", "To")),
    .by = "Date"
  )

# 2. 每三个一行求中位数 ----

set.seed(123)
df = tibble(value = sample(1:100, 30))
df

df %>%
  mutate(group = (row_number() - 1) %/% 3) %>%
  summarise(median = median(value), .by = group)
